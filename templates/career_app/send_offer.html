{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">üì® –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç—É</h4>
                </div>
                <div class="card-body">
                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–Ω–¥–∏–¥–∞—Ç–µ -->
                    <div class="alert alert-info">
                        <h5>–ö–∞–Ω–¥–∏–¥–∞—Ç: {{ match.matched_applicant.first_name }} {{ match.matched_applicant.last_name }}</h5>
                        <p class="mb-1"><strong>–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º:</strong> {{ match.match_percentage }}%</p>

                        {% if match.matched_applicant.position %}
                        <p class="mb-1"><strong>–ñ–µ–ª–∞–µ–º–∞—è –¥–æ–ª–∂–Ω–æ—Å—Ç—å:</strong> {{ match.matched_applicant.position }}</p>
                        {% endif %}

                        {% if match.matched_applicant.email %}
                        <p class="mb-1"><strong>Email:</strong> {{ match.matched_applicant.email }}</p>
                        {% endif %}

                        {% if match.match_details.matched_concepts %}
                        <p class="mb-1"><strong>–ö–ª—é—á–µ–≤—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è:</strong></p>
                        <div class="d-flex flex-wrap gap-1">
                            {% for skill in match.match_details.matched_concepts %}
                            <span class="badge bg-success">{{ skill }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>

                    <!-- –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                    <form method="post">
                        {% csrf_token %}

                        <div class="mb-3">
                            <label class="form-label">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</label>
                            <textarea name="message" class="form-control" rows="8"
                                      placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞–∫–∞–Ω—Å–∏–∏, —É—Å–ª–æ–≤–∏—è—Ö —Ä–∞–±–æ—Ç—ã, –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–∞—Ö...">
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{ match.matched_applicant.first_name }}!

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –Ω–∞—à–µ–≥–æ –ò–ò-–ø–æ–∏—Å–∫–∞ –≤–∞—à–∞ –∫–∞–Ω–¥–∏–¥–∞—Ç—É—Ä–∞ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ {{ match.match_percentage }}%.

{% if match.match_details.matched_concepts %}
–û—Å–æ–±–µ–Ω–Ω–æ –Ω–∞—Å –≤–ø–µ—á–∞—Ç–ª–∏–ª–∏ –≤–∞—à–∏ –Ω–∞–≤—ã–∫–∏ –≤: {{ match.match_details.matched_concepts|join:", " }}.
{% endif %}

–ú—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ.

–î–∞–≤–∞–π—Ç–µ –æ–±—Å—É–¥–∏–º –¥–µ—Ç–∞–ª–∏ –∏ –æ—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤—Å–µ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã!

–° —É–≤–∞–∂–µ–Ω–∏–µ–º,
{{ request.user.userprofile.company.name }}
                            </textarea>
                            <div class="form-text">
                                –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∫–∞–Ω–¥–∏–¥–∞—Ç—É —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —á–∞—Ç–æ–≤. –ö–∞–Ω–¥–∏–¥–∞—Ç —Å–º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –æ—Ç–≤–µ—Ç–∏—Ç—å –≤–∞–º.
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{% url 'ai_search_results' match.ideal_candidate_profile.id %}" class="btn btn-secondary me-md-2">
                                ‚Üê –ù–∞–∑–∞–¥ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
                            </a>
                            <button type="submit" class="btn btn-success">
                                üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="card mt-4">
                <div class="card-body">
                    <h5>üí° –°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:</h5>
                    <ul class="text-muted">
                        <li>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç—É –ø–æ –∏–º–µ–Ω–∏</li>
                        <li>–£–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–∞–∫–∞–Ω—Å–∏—é –∏–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã</li>
                        <li>–ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–æ–∑–≤–æ–Ω–∞ –∏–ª–∏ –≤—Å—Ç—Ä–µ—á–∏</li>
                        <li>–ë—É–¥—å—Ç–µ –≥–æ—Ç–æ–≤—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —É—Å–ª–æ–≤–∏—è—Ö —Ä–∞–±–æ—Ç—ã</li>
                        <li>–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ —Å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}