import os
import django
import sys

project_path = os.path.dirname(os.path.abspath(__file__))
sys.path.append(project_path)

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'techno_work.settings')
django.setup()

from career_app.models import Category


def create_categories():
    # –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    main_categories = [
        {'name': 'IT –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', 'description': '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ'},
        {'name': '–î–∏–∑–∞–π–Ω –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ', 'description': '–î–∏–∑–∞–π–Ω, –∏—Å–∫—É—Å—Å—Ç–≤–æ –∏ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏'},
        {'name': '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–¥–∞–∂–∏', 'description': '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥, —Ä–µ–∫–ª–∞–º–∞ –∏ –ø—Ä–æ–¥–∞–∂–∏'},
        {'name': '–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç', 'description': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ'},
        {'name': '–§–∏–Ω–∞–Ω—Å—ã –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è', 'description': '–§–∏–Ω–∞–Ω—Å—ã, –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –∏ —ç–∫–æ–Ω–æ–º–∏–∫–∞'},
        {'name': '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—É–∫–∞', 'description': '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –Ω–∞—É–∫–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è'},
        {'name': '–ú–µ–¥–∏—Ü–∏–Ω–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ', 'description': '–ú–µ–¥–∏—Ü–∏–Ω–∞, —Ñ–∞—Ä–º–∞—Ü–µ–≤—Ç–∏–∫–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ'},
        {'name': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞', 'description': '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –ª–æ–≥–∏—Å—Ç–∏–∫–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞'},
        {'name': '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ', 'description': '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –∏–Ω–∂–µ–Ω–µ—Ä–∏—è'},
        {'name': '–°—Ñ–µ—Ä–∞ —É—Å–ª—É–≥', 'description': '–£—Å–ª—É–≥–∏, —Ç—É—Ä–∏–∑–º –∏ –≥–æ—Å—Ç–µ–ø—Ä–∏–∏–º—Å—Ç–≤–æ'},
        {'name': '–î—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏', 'description': '–î—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏'},
    ]

    # –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    main_cats = {}

    print("üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π...")
    for cat_data in main_categories:
        category, created = Category.objects.get_or_create(
            name=cat_data['name'],
            defaults={
                'description': cat_data['description'],
                'is_main': True
            }
        )
        main_cats[cat_data['name']] = category
        if created:
            print(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {cat_data['name']}")

    # –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ–º –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    subcategories = {
        'IT –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏': [
            {'name': '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', 'description': '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è'},
            {'name': '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', 'description': '–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-—Å–∞–π—Ç–æ–≤ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π'},
            {'name': '–ú–æ–±–∏–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞', 'description': '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π'},
            {'name': 'Data Science', 'description': '–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ'},
            {'name': 'DevOps', 'description': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è'},
            {'name': '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (QA)', 'description': '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è'},
            {'name': '–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', 'description': '–ó–∞—â–∏—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º'},
            {'name': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞', 'description': '–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π'},
        ],
        '–î–∏–∑–∞–π–Ω –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ': [
            {'name': '–í–µ–±-–¥–∏–∑–∞–π–Ω', 'description': '–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Å–∞–π—Ç–æ–≤'},
            {'name': '–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –¥–∏–∑–∞–π–Ω', 'description': '–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π'},
            {'name': 'UI/UX –¥–∏–∑–∞–π–Ω', 'description': '–î–∏–∑–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤'},
            {'name': '3D-–¥–∏–∑–∞–π–Ω', 'description': '–¢—Ä–µ—Ö–º–µ—Ä–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ'},
            {'name': '–ú–æ—É—à–Ω-–¥–∏–∑–∞–π–Ω', 'description': '–°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏'},
        ],
        '–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ø—Ä–æ–¥–∞–∂–∏': [
            {'name': '–¶–∏—Ñ—Ä–æ–≤–æ–π –º–∞—Ä–∫–µ—Ç–∏–Ω–≥', 'description': '–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ'},
            {'name': 'SMM', 'description': '–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö'},
            {'name': '–ö–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥', 'description': '–°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞'},
            {'name': 'SEO', 'description': '–ü–æ–∏—Å–∫–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è'},
            {'name': '–ü—Ä–æ–¥–∞–∂–∏', 'description': '–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É—Å–ª—É–≥'},
            {'name': '–¢–æ—Ä–≥–æ–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª', 'description': '–†–∞–±–æ—Ç–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏'},
        ],
        '–ú–µ–Ω–µ–¥–∂–º–µ–Ω—Ç': [
            {'name': '–ü—Ä–æ–µ–∫—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç', 'description': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏'},
            {'name': '–ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç', 'description': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–º'},
            {'name': '–û—Ñ–∏—Å-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç', 'description': '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞'},
            {'name': 'HR', 'description': '–ü–æ–¥–±–æ—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º'},
            {'name': '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç', 'description': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏'},
        ],
        '–§–∏–Ω–∞–Ω—Å—ã –∏ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è': [
            {'name': '–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è', 'description': '–í–µ–¥–µ–Ω–∏–µ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–æ–≥–æ —É—á–µ—Ç–∞'},
            {'name': '–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑', 'description': '–ê–Ω–∞–ª–∏–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π'},
            {'name': '–≠–∫–æ–Ω–æ–º–∏–∫–∞', 'description': '–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑'},
            {'name': '–ê—É–¥–∏—Ç', 'description': '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏'},
        ],
        '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—É–∫–∞': [
            {'name': '–ü—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏–µ', 'description': '–û–±—É—á–µ–Ω–∏–µ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞–Ω–∏–µ'},
            {'name': '–ù–∞—É—á–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è', 'description': '–ù–∞—É—á–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è'},
            {'name': '–†–µ–ø–µ—Ç–∏—Ç–æ—Ä—Å—Ç–≤–æ', 'description': '–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ'},
        ],
        '–ú–µ–¥–∏—Ü–∏–Ω–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ': [
            {'name': '–ú–µ–¥–∏—Ü–∏–Ω–∞', 'description': '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞'},
            {'name': '–§–∞—Ä–º–∞—Ü–µ–≤—Ç–∏–∫–∞', 'description': '–†–∞–±–æ—Ç–∞ –≤ –∞–ø—Ç–µ–∫–µ'},
            {'name': '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è', 'description': '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å'},
        ],
        '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞': [
            {'name': '–õ–æ–≥–∏—Å—Ç–∏–∫–∞', 'description': '–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–∑–æ–∫'},
            {'name': '–í–æ–¥–∏—Ç–µ–ª–∏', 'description': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏'},
            {'name': '–ö—É—Ä—å–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 'description': '–î–æ—Å—Ç–∞–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤'},
        ],
        '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ': [
            {'name': '–ò–Ω–∂–µ–Ω–µ—Ä–∏—è', 'description': '–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã'},
            {'name': '–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ', 'description': '–°—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã'},
            {'name': '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞', 'description': '–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–¥–∞–Ω–∏–π'},
            {'name': '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ', 'description': '–†–∞–±–æ—Ç–∞ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ'},
        ],
        '–°—Ñ–µ—Ä–∞ —É—Å–ª—É–≥': [
            {'name': '–†–µ—Å—Ç–æ—Ä–∞–Ω–Ω—ã–π –±–∏–∑–Ω–µ—Å', 'description': '–†–∞–±–æ—Ç–∞ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö'},
            {'name': '–ì–æ—Å—Ç–∏–Ω–∏—á–Ω—ã–π –±–∏–∑–Ω–µ—Å', 'description': '–†–∞–±–æ—Ç–∞ –≤ –æ—Ç–µ–ª—è—Ö'},
            {'name': '–¢—É—Ä–∏–∑–º', 'description': '–¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏'},
            {'name': '–ö—Ä–∞—Å–æ—Ç–∞ –∏ –∑–¥–æ—Ä–æ–≤—å–µ', 'description': '–°–∞–ª–æ–Ω—ã –∫—Ä–∞—Å–æ—Ç—ã'},
        ],
        '–î—Ä—É–≥–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏': [
            {'name': '–Æ—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏—è', 'description': '–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏'},
            {'name': '–ü–µ—Ä–µ–≤–æ–¥—ã', 'description': '–ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤'},
            {'name': '–ñ—É—Ä–Ω–∞–ª–∏—Å—Ç–∏–∫–∞', 'description': '–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞'},
            {'name': '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è', 'description': '–§–æ—Ç–æ—Å—ä–µ–º–∫–∞'},
            {'name': '–í–∏–¥–µ–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ', 'description': '–í–∏–¥–µ–æ—Å—ä–µ–º–∫–∞ –∏ –º–æ–Ω—Ç–∞–∂'},
            {'name': '–ö–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', 'description': '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏'},
        ],
    }

    print("\nüöÄ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π...")
    for main_cat_name, subcats in subcategories.items():
        main_cat = main_cats.get(main_cat_name)
        if main_cat:
            for subcat_data in subcats:
                subcategory, created = Category.objects.get_or_create(
                    name=subcat_data['name'],
                    defaults={
                        'description': subcat_data['description'],
                        'parent': main_cat,
                        'is_main': False
                    }
                )
                if created:
                    print(f"   ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è: {subcat_data['name']}")

    print(f"\nüéØ –í—Å–µ–≥–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {Category.objects.filter(is_main=True).count()}")
    print(f"üéØ –í—Å–µ–≥–æ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π: {Category.objects.filter(is_main=False).count()}")
    print(f"üéØ –í—Å–µ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π: {Category.objects.count()}")


if __name__ == '__main__':
    create_categories()